# Example: Custom TQServer Configuration
# This file demonstrates all available server-level configuration options
#
# IMPORTANT: Per-worker configuration (path, runtime, timeouts, logging) is configured
# in each worker's config/worker.yaml file, NOT in this server.yaml file.
# See workers/index/config/worker.yaml for an example worker configuration.

# Server settings
server:
  # Port for the main HTTP server to listen on
  port: 3000 # Default: 8080

  # Timeouts for HTTP server (in seconds)
  read_timeout_seconds: 60 # Default: 30 - Time allowed to read request
  write_timeout_seconds: 60 # Default: 30 - Time allowed to write response
  idle_timeout_seconds: 180 # Default: 120 - Keep-alive timeout

  # Server log file path
  # Placeholders: {date} = YYYY-MM-DD date
  # Use null, empty string, or ~ to disable file logging (only log to stdout/stderr)
  log_file: "logs/tqserver_{date}.log" # Default: logs/tqserver_{date}.log

# Worker settings
workers:
  # Directory containing workers (each subdirectory is a worker)
  # Each worker should have: src/, bin/, config/worker.yaml
  directory: "workers" # Default: workers

  # Port range for worker processes
  # Workers are assigned ports sequentially from this range
  # Make sure the range is large enough for all your workers
  port_range_start: 10000 # Default: 9000
  port_range_end: 19999 # Default: 9999

  # Worker startup settings (in milliseconds)
  startup_delay_ms: 200 # Default: 100 - Time to wait for worker to start before routing traffic

  # Graceful restart settings (in milliseconds)
  restart_delay_ms: 200 # Default: 100 - Delay before stopping old worker
  shutdown_grace_period_ms: 1000 # Default: 500 - Time to wait for graceful shutdown

# File watching settings
file_watcher:
  # Debounce delay to avoid multiple rebuilds for rapid file changes (in milliseconds)
  debounce_ms: 100 # Default: 50
