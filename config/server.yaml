# TQServer Configuration

# Server settings
server:
  # Port for the main HTTP server to listen on
  port: 8080

  # Timeouts for HTTP server
  read_timeout_seconds: 30
  write_timeout_seconds: 30
  idle_timeout_seconds: 120

  # Server log file
  # Placeholders: {date} = YYYY-MM-DD date
  # Use null, empty string, or ~ to disable file logging (only log to stdout/stderr)
  log_file: "logs/tqserver_{date}.log"

# Worker settings
workers:
  # Directory containing workers (each subdirectory is a worker)
  directory: "workers"

  # Port range for worker processes
  port_range_start: 9000
  port_range_end: 9999

  # Worker startup settings
  startup_delay_ms: 100 # Time to wait for worker to start

  # Graceful restart settings
  restart_delay_ms: 100 # Delay before stopping old worker
  shutdown_grace_period_ms: 500 # Time to wait for graceful shutdown

# File watching settings
file_watcher:
  # Debounce delay to avoid multiple rebuilds for rapid file changes
  debounce_ms: 50

# SOCKS5 Proxy for outgoing API call logging
# When enabled, all workers will route outgoing connections through this proxy
socks5:
  enabled: false  # Set to true to enable proxy
  port: 1080
  log_file: "logs/socks5_{date}.log"
  log_format: "json"  # "json" | "text"

  # HTTPS Inspection (MITM mode) - DEVELOPMENT ONLY
  # Allows logging of HTTPS request/response bodies
  # https_inspection:
  #   enabled: true
  #   ca_cert: "config/tqserver-ca.crt"
  #   ca_key: "config/tqserver-ca.key"
  #   auto_generate: true    # Generate CA if not exists
  #   log_body: true         # Log request/response bodies
  #   max_body_size: 1048576 # Max body size to log (1MB)
